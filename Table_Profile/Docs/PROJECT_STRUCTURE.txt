================================================================================
TABLE PROFILE GRAPH - FINAL PROJECT STRUCTURE
================================================================================

ğŸ“ PROJECT LAYOUT
-----------------

Table_Profile/
â”œâ”€â”€ profile.py                          ğŸ¯ MAIN ENTRY POINT
â”‚
â”œâ”€â”€ table_profile_graph/               ğŸ“¦ CORE PACKAGE
â”‚   â”œâ”€â”€ __init__.py                    
â”‚   â”œâ”€â”€ config.py                       âš™ï¸  Configuration constants
â”‚   â”œâ”€â”€ visualizer.py                   ğŸ¨ D3.js visualization (DEFAULT)
â”‚   â”‚
â”‚   â”œâ”€â”€ profiler/                       ğŸ“Š Phase 1: Metadata Collection
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py                   Data models and enums
â”‚   â”‚   â”œâ”€â”€ metadata_collector.py       Core orchestrator (Steps 1.2-1.4)
â”‚   â”‚   â”œâ”€â”€ stats_profiler.py           Type-specific statistics
â”‚   â”‚   â”œâ”€â”€ relationship_detector.py    PK/FK/FD/correlation detection
â”‚   â”‚   â”œâ”€â”€ hint_generator.py           Optimization hints
â”‚   â”‚   â””â”€â”€ utils.py                    Helper functions
â”‚   â”‚
â”‚   â””â”€â”€ graph/                          ğŸ”¨ Phase 2: Graph Construction
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ schema.py                   Step 2.1: Node/Edge types
â”‚       â”œâ”€â”€ builder.py                  Step 2.2-2.6: Graph building
â”‚       â””â”€â”€ serializer.py               Save/load in multiple formats
â”‚
â”œâ”€â”€ graph_builder.py                    ğŸ“œ Legacy (can archive)
â”œâ”€â”€ Dataset/                            ğŸ“‚ Sample CSV files
â””â”€â”€ Legacy/                             ğŸ“œ Old implementations

================================================================================
ğŸš€ USAGE
================================================================================

Quick Start:
  python profile.py Dataset/customer_dataset.csv

Custom table name:
  python profile.py data.csv my_table

With graph export:
  python profile.py data.csv --save-graph

Skip visualization:
  python profile.py data.csv --no-viz

All options:
  python profile.py data.csv custom_name --save-graph

================================================================================
ğŸ“¦ PACKAGE MODULES
================================================================================

1ï¸âƒ£  PROFILER MODULE (Phase 1)
   Purpose: Collect comprehensive metadata from database tables
   
   Components:
   â€¢ models.py              - Data classes (ColumnInfo, TableMetadata, etc.)
   â€¢ metadata_collector.py  - Main orchestrator
   â€¢ stats_profiler.py      - Numerical/Categorical/Temporal/Text stats
   â€¢ relationship_detector.py - PK/FK/Correlation/FD detection
   â€¢ hint_generator.py      - Query optimization hints
   â€¢ utils.py               - Helper functions (CSV loading, summary, reports)

2ï¸âƒ£  GRAPH MODULE (Phase 2)
   Purpose: Build knowledge graphs from metadata
   
   Components:
   â€¢ schema.py       - Node/Edge type definitions (enums)
   â€¢ builder.py      - GraphBuilder class (builds NetworkX graph)
   â€¢ serializer.py   - Save/load in multiple formats

3ï¸âƒ£  VISUALIZER MODULE
   Purpose: Interactive D3.js visualization
   
   Features:
   â€¢ Full-screen design
   â€¢ Node selection (single/multi)
   â€¢ Edge selection (NEW!)
   â€¢ Drag & drop
   â€¢ Zoom & pan
   â€¢ Filtering
   â€¢ Keyboard shortcuts

================================================================================
ğŸ¨ VISUALIZATION FEATURES (D3.js)
================================================================================

âœ… Interactions:
   â€¢ Click node/edge       â†’ Select
   â€¢ Ctrl+Click           â†’ Multi-select
   â€¢ Double-click node    â†’ Center view
   â€¢ Drag node            â†’ Move and pin
   â€¢ Drag background      â†’ Pan
   â€¢ Scroll               â†’ Zoom
   â€¢ Hover                â†’ Show tooltip

âœ… Selection System:
   â€¢ Nodes: Red border when selected
   â€¢ Edges: Red color when selected
   â€¢ Connected elements auto-highlight
   â€¢ Unconnected elements dim (20% opacity)
   â€¢ Status bar shows selection count

âœ… Keyboard Shortcuts:
   R   - Restart physics simulation
   F   - Freeze/unfreeze all nodes
   +   - Zoom in
   -   - Zoom out
   0   - Reset view
   ESC - Clear all selections

âœ… Filtering:
   â€¢ Filter by node type (dropdown)
   â€¢ Show only: All/Table/Column/Constraint/Stats/Hint/Values
   â€¢ Maintains selection when filtering

================================================================================
ğŸ’¾ OUTPUT FILES
================================================================================

Standard Run:
  âœ“ <table>_metadata.json          - Complete metadata
  âœ“ <table>_visualization.html     - Interactive D3 graph

With --save-graph:
  âœ“ <table>_graph.gpickle          - NetworkX pickle (full fidelity)
  âœ“ <table>_graph.graphml          - For Gephi/Cytoscape
  âœ“ <table>_graph.json             - JSON node-link format
  âœ“ <table>_graph.gexf             - GEXF format
  âœ“ <table>_graph_summary.json     - Graph statistics

================================================================================
ğŸ”§ PROGRAMMATIC USAGE
================================================================================

Complete Pipeline:
```python
from table_profile_graph import (
    MetadataCollector, load_table_from_csv,
    GraphBuilder, visualize_from_graph
)
import duckdb

conn = duckdb.connect(":memory:")
table_name = load_table_from_csv(conn, "data.csv")

# Phase 1: Metadata
collector = MetadataCollector(conn, table_name)
metadata = collector.collect()

# Phase 2: Graph
builder = GraphBuilder(metadata)
graph = builder.build()

# Phase 3: Visualize
visualize_from_graph(graph, "output.html")
```

Just Visualization:
```python
from table_profile_graph import visualize_from_metadata_file

visualize_from_metadata_file('metadata.json', 'viz.html')
```

Export for Gephi:
```python
from table_profile_graph import GraphBuilder, GraphSerializer

builder = GraphBuilder(metadata)
graph = builder.build()
GraphSerializer.save_graphml(graph, "my_graph")
# â†’ my_graph.graphml ready for Gephi import
```

================================================================================
ğŸ¯ USE CASES
================================================================================

1. NL2SQL Integration
   â€¢ Use semantic types for query planning
   â€¢ Use sample values for entity extraction
   â€¢ Use FDs for query optimization
   â€¢ Use hints for index/partition recommendations

2. Database Design
   â€¢ Identify normalization issues (functional dependencies)
   â€¢ Detect redundant columns (correlations)
   â€¢ Plan indexes (high cardinality columns)
   â€¢ Design partitions (temporal columns)

3. Data Exploration
   â€¢ Visual understanding of table structure
   â€¢ Discover relationships between columns
   â€¢ Identify data quality issues
   â€¢ Understand distributions

4. External Tools
   â€¢ Export to Gephi for advanced network analysis
   â€¢ Export to Cytoscape for biological network style
   â€¢ Use GraphML for custom processing

================================================================================
ğŸ“Š DEPENDENCIES
================================================================================

Core:
  â€¢ duckdb >= 0.9.0       - Database engine
  â€¢ networkx >= 3.0       - Graph manipulation

Visualization:
  â€¢ pyvis >= 0.3.0        - For Pyvis visualizations (optional legacy)

Install all:
  pip install -r requirements.txt

================================================================================
